■目標
・用意した画像を表示する。
・さらに、心情が一定値以下のときに表示する画像を変える。


■手順
・「Guide」フォルダ内にある画像とあわせてに見ると分かりやすいかもしれません。

●前準備(RimWorld起動前)
(1)画像を用意する。
・「<RimWorldのMODフォルダ>/DetailPortraits/Textures」内に表示したい画像を用意します。
・今回は以下のフォルダ内に用意しました(図1)。
 「C:/Program Files (x86)/Steam/steamapps/common/RimWorld/Mods/DetailPortraits/Textures/Portraits」
・RimWorld起動中に画像ファイルを用意した場合、読み込まれない可能性があります。その場合はRimWorldを再起動してください。

●ゲーム中
(2)ポートレイト設定ウィンドウを開く。
・ポートレイトを設定したい入植者を選択し、左下のインスペクター(入植者の名前などが表示される欄)右上のポートレイトアイコン(図2赤枠)を押します。

(3)描画モードを変更する。
・描画モードを「デフォルト」から「詳細版」に変更します(図3)。

(4)レイヤーを追加する。
・ラベル「レイヤー」の下の+ボタン(図4 赤枠)を押します。
・+ボタンを押すと、ラベル「レイヤー」の下のレイヤーリストにレイヤーが追加されます(図5)。
・追加されたレイヤーを選択すると、そのレイヤーを編集することができます(図6)。

(5)レイヤーの画像パスを設定する。
・ラベル「画像ファイル」の右のテキストフィールドに表示したい画像のファイルパスを入力します(図7赤枠)。
・ファイルパスはこのModの'Textures'フォルダからの相対パスを入力してください。また、拡張子は必要ありません。
・今回は画像ファイルパスを「Portraits/Face1」とします。
・入力した後はテキストフィールドの右の+ボタン(図8赤枠)を押して、下のファイルパス一覧に入力したファイルパスが追加されていることを確認してください。
・ポートレイト設定ウィンドウを閉じると入植者バーのポートレイトに反映されます(図9)。

(6)座標と拡大率を調整する。
・お好みで座標と拡大率を調整します(図10赤枠)。

(7)心情が一定値以下のときに表示するレイヤーを追加する。
・(4)と同様の手順でレイヤーを追加します。

(8)レイヤー名を設定する。
・レイヤー一覧から一目で各レイヤーを判別できるようにレイヤー名を設定します。
・(4)で作成したレイヤーを選択し、ラベル「レイヤー名」の右のテキストフィールドにレイヤー名を入力します(図11赤枠)。
・今回はレイヤー名を「Face1」とします。

(9)心情が一定値未満のときに表示するレイヤーを編集する。
・(7)で作成したレイヤーのレイヤー名と画像ファイルパスを(8)と(5)と同様の手順で設定します。
・今回はレイヤー名を「Face2」、画像ファイルパスを「Portraits/Face2」とします(図12赤枠)。

(10)レイヤーの順番を変更する。
・レイヤー一覧のレイヤー「Face2」の△ボタン(図12青枠)を押して、レイヤー「Face1」と順番を入れ替えます。
[補足:レイヤーの描画について]
・一つのレイヤー番号に対し、先に全ての描画条件を満たした一つのレイヤーしか描画することができません。
・レイヤー番号が同じである全てのレイヤーでそれぞれの描画条件を満たしている場合は、レイヤー一覧で一番上にあるレイヤーのみが表示されます。

(11)描画条件を追加する。
・レイヤー「Face2」を心情が一定値未満のときに表示するようにします。
・まず、ラベル「描画条件」の右の+ボタン(図13赤枠)を押して、描画条件設定ウィンドウを開きます。
・次に、左辺を「欲求「心情」」、演算子を「<」に設定し、右辺リストに「0.5」を追加します(図14)。
・これは「心情が50%未満」という条件を表しています。
・設定し終えたら描画条件設定ウィンドウを閉じます(閉じると図15のようになっているはずです)。

(12)動作確認
・心情が50%以上の場合はレイヤー「Face2」の条件「心情が50%未満」を満たさないため、描画条件を設定していない(*1)レイヤー「Face1」が表示されます(図16)。
・心情が50%未満の場合はレイヤー「Face2」の条件「心情が50%未満」を満たすため、レイヤー「Face2」が表示されます(図17)。

*1 描画条件を設定していない場合は、常に描画条件を満たしていると解釈されます。

2019/10/10更新